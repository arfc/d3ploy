<simulation>

  <archetypes>
    <spec>
      <lib>agents</lib>
      <name>NullRegion</name>
    </spec>
    <spec>
        <lib>cycamore</lib>
        <name>DeployInst</name>
    </spec>
      <spec>
          <lib>agents</lib>
          <name>NullInst</name>
      </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Source</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Reactor</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Sink</name>
    </spec>
    <spec>
      <lib>d3ploy.demand_driven_deployment_inst</lib>
      <name>DemandDrivenDeploymentInst</name>
    </spec>
    <spec>
      <lib>d3ploy.supply_driven_deployment_inst</lib>
      <name>SupplyDrivenDeploymentInst</name>
    </spec>
  </archetypes>

  <control>
    <duration>100</duration>
    <startmonth>1</startmonth>
    <startyear>2000</startyear>
  </control>

  <facility>
    <config>
      <Source>
        <outcommod>fuel</outcommod>
        <outrecipe>fresh_uox</outrecipe>
        <throughput>3000</throughput>
      </Source>
    </config>
    <name>source</name>
  </facility>

  <facility>
    <config>
      <Source>
        <outcommod>fuel</outcommod>
        <outrecipe>fresh_uox</outrecipe>
        <throughput>90000</throughput>
      </Source>
    </config>
    <name>initialsource</name>
    <lifetime>2</lifetime>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>11</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>41</lifetime>
    <name>reactor1</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>12</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>42</lifetime>
    <name>reactor2</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>13</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>43</lifetime>
    <name>reactor3</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>14</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>44</lifetime>
    <name>reactor4</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>15</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>45</lifetime>
    <name>reactor5</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>16</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>46</lifetime>
    <name>reactor6</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>17</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>47</lifetime>
    <name>reactor7</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>18</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>48</lifetime>
    <name>reactor8</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>19</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>49</lifetime>
    <name>reactor9</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>20</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <lifetime>50</lifetime>
    <name>reactor10</name>
  </facility>

  <facility>
    <config>
      <Reactor>
        <assem_size>1000</assem_size>
        <cycle_time>18</cycle_time>
        <fuel_incommods>
          <val>fuel</val>
        </fuel_incommods>
        <fuel_inrecipes>
          <val>fresh_uox</val>
        </fuel_inrecipes>
        <fuel_outcommods>
          <val>spent_fuel</val>
        </fuel_outcommods>
        <fuel_outrecipes>
          <val>spent_uox</val>
        </fuel_outrecipes>
        <n_assem_batch>1</n_assem_batch>
        <n_assem_core>3</n_assem_core>
        <power_cap>1000</power_cap>
        <refuel_time>1</refuel_time>
      </Reactor>
    </config>
    <name>newreactor</name>
  </facility>

<facility>
    <name>sink</name>
    <config>
        <Sink>
            <in_commods>
                <val>spent_fuel</val>
            </in_commods>
            <max_inv_size>5e4</max_inv_size>
        </Sink>
    </config>
</facility>


  <recipe>
    <basis>mass</basis>
    <name>fresh_uox</name>
    <nuclide>
      <comp>0.711</comp>
      <id>U235</id>
    </nuclide>
    <nuclide>
      <comp>99.289</comp>
      <id>U238</id>
    </nuclide>
  </recipe>
  <recipe>
    <basis>mass</basis>
    <name>spent_uox</name>
    <nuclide>
      <comp>50</comp>
      <id>Kr85</id>
    </nuclide>
    <nuclide>
      <comp>50</comp>
      <id>Cs137</id>
    </nuclide>
  </recipe>

  <region>
    <config>
      <NullRegion>
      </NullRegion>
    </config>

    <institution>
      <config>
        <DemandDrivenDeploymentInst>
          <calc_method>holt_winters</calc_method>
          <facility_commod>
          <item>
              <facility>newreactor</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor10</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor9</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor8</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor7</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor6</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor5</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor4</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor3</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor2</facility>
              <commod>POWER</commod>
            </item>
            <item>
              <facility>reactor1</facility>
              <commod>POWER</commod>
            </item>
          </facility_commod>
          <facility_capacity>
          <item>
              <facility>newreactor</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor10</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor9</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor8</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor7</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor6</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor5</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor4</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor3</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor2</facility>
              <capacity>1000</capacity>
            </item>
            <item>
              <facility>reactor1</facility>
              <capacity>1000</capacity>
            </item>
          </facility_capacity>
          <facility_pref>
            <item>
            <facility>reactor1</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor2</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor3</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor4</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor5</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor6</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor7</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor8</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor9</facility>
            <pref>-1</pref>
            </item>
            <item>
            <facility>reactor10</facility>
            <pref>-1</pref>
            </item>
          </facility_pref>
          <demand_eq>1000*np.sin(np.pi*t/3)+10000</demand_eq>
          <record>1</record>
          <steps>1</steps>
          <buffer_type>
          <item>
            <commod>POWER</commod>
            <type>float</type>
          </item>
          </buffer_type>
          <supply_buffer>
            <item>
                <commod>POWER</commod>
                <buffer>2000</buffer>
            </item>
          </supply_buffer>
          <installed_cap>1</installed_cap>
        </DemandDrivenDeploymentInst>
      </config>
        <initialfacilitylist>
        <entry>
          <number>1</number>
          <prototype>reactor1</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor2</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor3</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor4</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor5</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor6</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor7</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor8</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor9</prototype>
        </entry>
        <entry>
          <number>1</number>
          <prototype>reactor10</prototype>
        </entry>
      </initialfacilitylist>
      <name>driving_demand_inst</name>
    </institution>

    <institution>
      <config>
        <DemandDrivenDeploymentInst>
          <calc_method>ma</calc_method>
          <facility_commod>
            <item>
              <facility>source</facility>
              <commod>fuel</commod>
            </item>
            <item>
              <facility>initialsource</facility>
              <commod>fuel</commod>
            </item>
          </facility_commod>
          <facility_capacity>
            <item>
              <facility>source</facility>
              <capacity>3000</capacity>
            </item>
            <item>
              <facility>initialsource</facility>
              <capacity>90000</capacity>
            </item>
          </facility_capacity>
          <facility_pref>
            <item>
            <facility>initialsource</facility>
            <pref>-1</pref>
            </item>
          </facility_pref>
          <demand_eq>(1000*np.sin(np.pi*t/3)+10000)</demand_eq>
          <buffer_type>
          <item>
            <commod>fuel</commod>
            <type>float</type>
          </item>
          </buffer_type>
          <supply_buffer>
            <item>
                <commod>fuel</commod>
                <buffer>1000</buffer>
            </item>
          </supply_buffer>
          <record>1</record>
          <steps>1</steps>
          <installed_cap>1</installed_cap>
        </DemandDrivenDeploymentInst>
      </config>
        <initialfacilitylist>
        <entry>
          <number>1</number>
          <prototype>initialsource</prototype>
        </entry>
      </initialfacilitylist>
      <name>nondriving_demand_inst</name>
    </institution>

    <institution>
      <config>
        <SupplyDrivenDeploymentInst>
          <calc_method>fft</calc_method>
          <facility_commod>
            <item>
              <facility>sink</facility>
              <commod>spent_fuel</commod>
            </item>
          </facility_commod>
          <facility_capacity>
            <item>
              <facility>sink</facility>
              <capacity>5e4</capacity>
            </item>
          </facility_capacity>
          <capacity_std_dev>1.0</capacity_std_dev>
          <record>1</record>
          <steps>1</steps>
          <buffer_type>
          <item>
            <commod>spent_fuel</commod>
            <type>float</type>
          </item>
          </buffer_type>
          <capacity_buffer>
            <item>
                <commod>spent_fuel</commod>
                <buffer>0</buffer>
            </item>
          </capacity_buffer>
        </SupplyDrivenDeploymentInst>
      </config>
      <initialfacilitylist>
        <entry>
          <number>1</number>
          <prototype>sink</prototype>
        </entry>
      </initialfacilitylist>
      <name>supply_inst</name>
    </institution>
    

    <name>SingleRegion</name>
  </region>
  
</simulation>
